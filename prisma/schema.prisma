
generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Customer {
  id          String    @id @default(cuid())
  name        String
  email       String   
  phone       String?
  ssnLast4    String?   @map("ssn_last4")
  address     String? 
  birthDate  DateTime?  @map("birth_date")
  joinDate   DateTime   @map("join_date") @default(now())
  accountBalance Int    @map("account_balance") @default(0)
  isVip      Boolean    @default(false) @map("is_vip")
  encrypted   Boolean   @default(false)
  encryptedAt DateTime? @map("encrypted_at")
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @updatedAt @map("updated_at")
}

model EncryptionJob {
  id             Int      @id @default(autoincrement())
  batchId        String   @map("batch_id")
  status         JobStatus
  processedCount Int      @default(0) @map("processed_count") // 처리된 고객 수
  errorMessage   String?  @map("error_message")
  startedAt      DateTime? @map("started_at")
  completedAt    DateTime? @map("completed_at")
}

enum JobStatus {
  pending
  in_progress
  completed
  failed
}